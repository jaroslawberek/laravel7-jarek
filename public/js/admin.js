var AjaxVar={timeOutRoute:500};let jakas="kutas";var loading_ellipsis="<div class='loading-ellipsis d-flex flex-column justify-content-center align-items-center'><div class='loading-ellipsis-text'></div><div class='lds-ellipsis'>  <div></div>   <div></div>    <div></div>  <div></div></div></div>",loading_circle=" <div id='loading-circle'  class='loading-circle d-flex flex-column justify-content-center align-items-center'> <div class='loading-circle-text'></div>  <div class='lds-ring'>   <div></div>   <div></div>    <div></div>    <div></div> </div></div>";function SetLoading(e,t="circle",a="absolute",n=null,o=null,i=""){var l="";"circle"==t?l=$.parseHTML(loading_circle):"ellipsis"==t&&(l=$.parseHTML(loading_ellipsis)),$(e).append(l),$(l).css("position",a),null==n?$(l).width($(e).outerWidth()):$(l).width(n),null==o?$(l).height($(e).outerHeight()):$(l).height(o),$(l).offset({top:$(e).offset().top,left:$(e).offset().left}),$(".loading-"+t+" .loading-"+t+"-text").text(i)}function ajaxRoute(e,t=".content-page",a="fixed",n){$.ajax({type:"GET",url:e,data:"",dataType:"",beforeSend:function(){"fixed"===a&&SetLoading($(t),"ellipsis",a,null,"100vh","")},success:function(e){$(t).html(e),n()},complete:function(){}})}function locationRoute(e){SetLoading($(".content-page"),"circle","fixed",null,"100vh","kutas..."),setTimeout(function(){window.location=e},AjaxVar.timeOutRoute)}function createTableFormVarible(e){var t={},a={};for(let[n,o]of new FormData(e))n.indexOf("sort-")>-1&&""!=o?a[n]=o:n.indexOf("search-")>-1&&""!=o&&(t[n]=o);var n=[{sort:a,search:t}];return JSON.stringify(n[0])}function CrudForm(e){if(!(this instanceof CrudForm))return new CrudForm(e);this.onValidFields=function(e,t){return"OK"!=t.messages?($("#"+e).removeClass("ajax-validing"),$("#"+e).addClass("is-invalid"),$("#"+e+"-invalid-feedback").text(t.messages),$("#"+e+"-invalid-feedback").addClass("animate__animated animate__bounceInDown")):($("#"+e).removeClass("ajax-validing"),$("#"+e).removeClass("is-invalid"),$("#"+e).addClass("is-valid"),$("#"+e+"_feedback .invalid-feedback").removeClass("animate__animated animate__bounceInDown")),this},this.onStartValidFields=function(e){$("#"+e).removeClass("is-invalid"),$("#"+e).removeClass("is-valid"),$("#"+e).addClass("ajax-validing")},this.selector=e,this.ajaxController="AjaxField",this.ajaxFunction="ajaxField"}function onCreateCountry(e){CrudForm("#nations-form").checkAjaxFields(["nation_name","password"],{controller:"country.php"}),$(".selectpicker-confederations").selectpicker()}function onStore(e){}function onDeleteCountry(e){console.log("onDeleteCountry")}function onUpdateCountry(e){console.log("onUpdateCountry")}function onCreateLeague(e){console.log("onCreateLeague"),CrudForm("#league-form").checkAjaxFields(["league_name"],{controller:"country.php"}),$(".content-page").on("autocomplete.select",".league-autocomplete",function(e,t){$(this).parent().append(t.html_select),$(this).val(t.value),console.log("autocomplete.select=\n"+t.value),console.log(t.html_select)}),$(".content-page").on("click",".national-filed-close",function(){$("#nation_id").val("")})}function onCreateTeam(e){console.log("onCreateTeam huj"),CrudForm("#team-form").checkAjaxFields(["team_name"],{controller:"country.php"}),$(".content-page").on("autocomplete.select",".nation-autocomplete",function(e,t){console.log("jajajajajja"),$(this).parent().append(t.html_select),$(this).val(t.value),console.log("autocomplete.select=\n"+t.value),console.log(t.html_select)}),$(".content-page").on("autocomplete.select",".league-autocomplete",function(e,t){$(this).parent().append(t.html_select),$(this).val(t.value),console.log("autocomplete.select=\n"+t.value),console.log(t.html_select)}),$(".content-page").on("click",".national-filed-close",function(){$("#nation_id").val("")}),$(".content-page").on("click",".leangue-filed-close",function(){$("#leangue_id").val("")})}$(document).ready(function(){$(".menu-nav").on("click",".menu-item-link",function(e){e.preventDefault(),"#"!=$(this).attr("href")&&""!=$(this).attr("href")?(console.log("Menu: "+$(this).attr("href")),ajaxRoute($(this).attr("href"),".content-page","fixed",function(){})):console.log("Błędny href")})}),$(document).ready(function(){$(".content-page").on("submit",".table-form",function(e){e.preventDefault();let t=$(this);var a=createTableFormVarible(t[0]);$.ajax({type:t.attr("method"),url:t.attr("action"),data:JSON.parse(a),dataType:"",beforeSend:function(){SetLoading($("tbody"),"ellipsis","absolute",null,null,"")},success:function(e){$("tbody .loading-ellipsis").remove()}})}),$(".content-page").on("click",".sort-amount",function(){var e="#"+$(this).attr("target-sort-input");$(this).find("span").last().hasClass("fa fa-sort-amount-asc")?($(this).find("span").last().removeClass("fa fa-sort-amount-asc"),$(this).find("span").last().addClass("fa fa-sort-amount-desc"),$(e).val("desc")):$(this).find("span").last().hasClass("fa fa-sort-amount-desc")?($(this).find("span").last().removeClass("fa fa-sort-amount-desc"),$(e).val("")):($(this).find("span").last().addClass("fa fa-sort-amount-asc"),$(e).val("asc")),$("#"+$(this).attr("form")).submit()}),$(".content-page").on("click",".crud-form-create-click",function(e){e.preventDefault();let t=$(this).attr("onCreate"),a=$(this).attr("href");console.log("1 "+t),console.log(a),"#"!=$(this).attr("href")&&""!=$(this).attr("href")&&ajaxRoute(a,".content-page","fixed",function(){console.log("2 "+t),$(".autocomplete").autoComplete({resolverSettings:{},formatResult:function(e){return""!=e.html||e.html?{value:e.value,text:"",html:e.html}:{value:e.value,text:e.text}}}),$(".check-input-castom").on("click",function(){}),$(".avatar").hover(function(){""==$(".avatar .img-avatar").attr("src")?$(".img-trash").hide():$(".img-trash").show(),$(".avatar .avatar-img-menu").css("opacity","20%")},function(){$(".avatar .avatar-img-menu").css("opacity","0%")}),t&&window[t](a)})}),$(".content-page").on("click",".crud-form-delete-click",function(e){e.preventDefault();let t=$(this).attr("onDelete");console.log("delete");let a=$(this).attr("href");"#"!=$(this).attr("href")&&""!=$(this).attr("href")&&ajaxRoute(a,".content-page","fixed",function(){t&&window[t](a)})}),$(".content-page").on("click",".crud-form-update-click",function(e){e.preventDefault();let t=$(this).attr("onUpdate"),a=$(this).attr("href");console.log("update"),"#"!=$(this).attr("href")&&""!=$(this).attr("href")&&ajaxRoute(a,".content-page","fixed",function(){t&&window[t](a)})})}),CrudForm.prototype.checkAjaxFields=function(e,t=null,a=null,n=null,o=null){if(t&&!(t instanceof Object))throw new TypeError("Nie poprawne parametry: settings nie jest obiektem {}");if(this.ajaxController=t.controller,this.ajaxFunction=t.function,e instanceof Array){var i=this.ajaxController,l=this.onValidFields,s=this.onStartValidFields;return $(this.selector).on("blur","input, select, textarea",function(t){if(e.indexOf($(this).attr("name"))>=0){var a={field:$(this).attr("name"),value:$(this).val()},n=$(this).attr("name");$.ajax({method:"GET",url:"/"+i,dataType:"json",data:a,beforeSend:function(e){s(n)}}).done(function(e){l(n,e)}).fail(function(){}).always(function(){})}}),this}throw new TypeError("Nie poprawne parametry: fields nie jest tablicą []")},CrudForm.prototype.jakasInna=function(e){return this},$(document).ready(function(){$(".selectpicker-confederations").selectpicker()}),$(document).ready(function(){}),$(document).ready(function(){});
